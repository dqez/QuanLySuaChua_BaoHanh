@model QuanLySuaChua_BaoHanh.Areas.NhanVienKho.Models.PaginatedList<QuanLySuaChua_BaoHanh.Models.PhieuXuat>

@{
    ViewData["Title"] = "Danh sách phiếu xuất";
    Layout = "~/Areas/NhanVienKho/Views/Shared/_LayoutStashEmployee.cshtml";
}
<style>
    .simple-card {
        background: #f8fafc;
        border-radius: 1.2rem;
        box-shadow: 0 2px 12px 0 #e0e7ef;
        border: 1.5px solid #e3e8ee;
        overflow: hidden;
    }

    .simple-header {
        background: linear-gradient(90deg, #e0f2fe 0%, #bae6fd 100%);
        color: #2563eb;
        font-size: 1.25rem;
        font-weight: 700;
        letter-spacing: 0.5px;
        display: flex;
        align-items: center;
        gap: 0.7rem;
        padding: 1rem 1.5rem;
        border-bottom: 1px solid #e3e8ee;
    }

    .simple-search .form-control {
        border-radius: 2rem 0 0 2rem;
        border: 1.5px solid #e0e7ef;
        background: #fff;
        color: #2563eb;
        font-size: 1.08rem;
    }

        .simple-search .form-control:focus {
            box-shadow: 0 0 0 2px #bae6fd;
            border-color: #38bdf8;
            color: #2563eb;
        }

    .simple-search .btn-primary {
        border-radius: 0 2rem 2rem 0;
        background: linear-gradient(90deg, #38bdf8 0%, #2563eb 100%);
        border: none;
        color: #fff;
        font-weight: 600;
    }

    .simple-search .btn-outline-secondary {
        border-radius: 2rem;
        margin-left: 0.5rem;
        border: 1.5px solid #38bdf8;
        color: #38bdf8;
        background: transparent;
    }

        .simple-search .btn-outline-secondary:hover {
            background: #38bdf8;
            color: #fff;
        }

    .simple-table thead th {
        background: #e0f2fe;
        color: #2563eb;
        font-weight: 700;
        border: none;
        font-size: 1.08rem;
    }

    .simple-table tbody tr:hover {
        background: #f1f5f9;
    }

    .simple-table td, .simple-table th {
        border: none;
        vertical-align: middle !important;
    }

    .simple-badge {
        background: linear-gradient(90deg, #bae6fd 0%, #38bdf8 100%);
        color: #2563eb;
        font-weight: 600;
        font-size: 1.02rem;
        border-radius: 1.2em;
        padding: 0.4em 1em;
        letter-spacing: 0.5px;
        border: 1px solid #e0e7ef;
    }

    .simple-add-btn {
        border-radius: 2rem;
        font-weight: 600;
        font-size: 1.08rem;
        background: linear-gradient(90deg, #38bdf8 0%, #2563eb 100%);
        color: #fff;
        border: none;
        box-shadow: 0 2px 8px 0 #e0e7ef;
        transition: background 0.2s, transform 0.15s;
    }

        .simple-add-btn:hover {
            background: linear-gradient(90deg, #2563eb 0%, #38bdf8 100%);
            transform: scale(1.04);
        }

    .simple-pagination .page-link {
        border-radius: 2rem !important;
        color: #2563eb;
        border: none;
        font-weight: 600;
        background: #f1f5f9;
        margin: 0 0.15rem;
    }

        .simple-pagination .page-link:focus, .simple-pagination .page-link:hover {
            background: #bae6fd;
            color: #2563eb;
        }

    .simple-pagination .page-item.disabled .page-link {
        background: #f1f5f9;
        color: #b0b6be;
    }
</style>
<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h2 class="mb-0" style="color:#2563eb; letter-spacing:1px;">
            <i class="bi bi-journal-arrow-up"></i> Danh sách phiếu xuất
        </h2>
        <a href="/NhanVienKho/PhieuXuats/Create" class="simple-add-btn px-4 py-2">
            <i class="bi bi-plus-circle"></i> Thêm phiếu xuất mới
        </a>
    </div>

    <form asp-area="NhanVienKho" asp-controller="PhieuXuats" asp-action="Index" method="get" class="mb-4 simple-search">
        <div class="input-group">
            <input type="text"
                   name="searchString"
                   class="form-control"
                   placeholder="Tìm kiếm mã phiếu, mã kho, ghi chú..."
                   value="@(ViewData["CurrentFilter"] ?? "")" />
            <button class="btn btn-primary" type="submit">
                <i class="bi bi-search"></i>
            </button>
            <a href="/NhanVienKho/PhieuXuats/Index" class="btn btn-outline-secondary">Đặt lại</a>
        </div>
    </form>

    <div class="simple-card mb-4">
        <div class="simple-header">
            <i class="bi bi-table"></i>
            Bảng phiếu xuất
        </div>
        <div class="table-responsive">
            <table class="table simple-table align-middle mb-0">
                <thead>
                    <tr>
                        <th>Mã phiếu xuất</th>
                        <th>Ngày xuất</th>
                        <th class="text-end">Tổng tiền</th>
                        <th>Trạng thái</th>
                        <th>Ghi chú</th>
                        <th>Mã kho</th>
                        <th class="text-center">Tùy chọn</th>
                    </tr>
                </thead>
                <tbody>
                    @if (!Model.Any())
                    {
                        <tr>
                            <td colspan="7" class="text-center text-muted py-4">
                                <i class="bi bi-inbox fs-3"></i><br />
                                Không có phiếu xuất nào.
                            </td>
                        </tr>
                    }
                    else
                    {
                        @foreach (var item in Model)
                        {
                            <tr>
                                <td class="fw-semibold">@item.PhieuXuatId</td>
                                <td>@item.NgayXuat.ToString("dd/MM/yyyy")</td>
                                <td class="text-end">
                                    <span class="simple-badge">@item.TongTien?.ToString("N0") ₫</span>
                                </td>
                                <td>
                                    @if (item.TrangThai == "Done")
                                    {
                                        <span class="badge bg-success"><i class="bi bi-check-circle"></i> Đã xong</span>
                                    }
                                    else
                                    {
                                        <span class="badge bg-warning text-dark"><i class="bi bi-hourglass-split"></i> Chưa xong</span>
                                    }
                                </td>
                                <td>@item.GhiChu</td>
                                <td>@item.KhoId</td>
                                <td class="text-center">
                                    <a href="/NhanVienKho/PhieuXuats/Details/@item.PhieuXuatId" class="btn btn-info btn-sm me-1" title="Chi tiết">
                                        <i class="bi bi-eye"></i>
                                    </a>
                                    <a href="/NhanVienKho/PhieuXuats/Edit/@item.PhieuXuatId" class="btn btn-primary btn-sm me-1" title="Sửa">
                                        <i class="bi bi-pencil"></i>
                                    </a>
                                    <a href="/NhanVienKho/PhieuXuats/Delete/@item.PhieuXuatId" class="btn btn-danger btn-sm" title="Xóa">
                                        <i class="bi bi-trash"></i>
                                    </a>
                                </td>
                            </tr>
                        }
                    }
                </tbody>
            </table>
        </div>
    </div>

    <nav aria-label="Page navigation" class="mt-4">
        <ul class="pagination justify-content-center simple-pagination">
            @if (Model.HasPreviousPage)
            {
                <li class="page-item">
                    <a class="page-link"
                       asp-area="NhanVienKho"
                       asp-controller="PhieuXuats"
                       asp-action="Index"
                       asp-route-pageNumber="@(Model.PageIndex - 1)"
                       asp-route-currentFilter="@(ViewData["CurrentFilter"])">
                        <i class="bi bi-chevron-left"></i> Trước
                    </a>
                </li>
            }
            else
            {
                <li class="page-item disabled"><span class="page-link"><i class="bi bi-chevron-left"></i> Trước</span></li>
            }

            <li class="page-item disabled">
                <span class="page-link">
                    Trang @Model.PageIndex / @Model.TotalPages
                </span>
            </li>

            @if (Model.HasNextPage)
            {
                <li class="page-item">
                    <a class="page-link"
                       asp-area="NhanVienKho"
                       asp-controller="PhieuXuats"
                       asp-action="Index"
                       asp-route-pageNumber="@(Model.PageIndex + 1)"
                       asp-route-currentFilter="@(ViewData["CurrentFilter"])">
                        Tiếp <i class="bi bi-chevron-right"></i>
                    </a>
                </li>
            }
            else
            {
                <li class="page-item disabled"><span class="page-link">Tiếp <i class="bi bi-chevron-right"></i></span></li>
            }
        </ul>
    </nav>
</div>
